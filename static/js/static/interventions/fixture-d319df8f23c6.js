// Generated by CoffeeScript 1.6.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Denigma.Fixture = (function(_super) {
    __extends(Fixture, _super);

    /*
      this class is just for ease of use
      it has no other meaning
    */


    Fixture.prototype.controls = [];

    Fixture.prototype.tests = [];

    Fixture.prototype.ints = [];

    Fixture.prototype.animal = void 0;

    Fixture.prototype.manipulation = void 0;

    function Fixture() {
      this.species = new Denigma.Species("mouse", "mus", 18, "mouse.svg");
      this.manipulation = new Denigma.Manipulation("radiaction", "test grouped lived and mutated inside the reactor", "radiation.svg");
    }

    Fixture.prototype.rand = function(min, max) {
      return Math.round(Math.random() * (max - min) + min);
    };

    Fixture.prototype.rnd_snd = function() {
      return (Math.random() * 2 - 1) + (Math.random() * 2 - 1) + (Math.random() * 2 - 1);
    };

    Fixture.prototype.rnd = function(mean, stdev) {
      /*
        closer to normal distribution
        where stdev = standard deviation
      */

      return Math.round(this.rnd_snd() * stdev + mean);
    };

    Fixture.accessor("max", {
      get: function() {
        var exp, m, max, _i, _len, _ref;
        max = 0;
        _ref = this.controls;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          exp = _ref[_i];
          m = exp.get("max");
          if (m > max) {
            max = m;
          }
        }
        return max;
      }
    });

    Fixture.prototype.clean = function() {
      this.controls = [];
      this.tests = [];
      return this.ints = [];
    };

    Fixture.prototype.generate = function(num) {
      var a, an, animals, control, i, int, mean, stdev, test, _i, _j, _ref;
      this.clean();
      if (num == null) {
        num = 10;
      }
      mean = this.rand(10, 14);
      stdev = this.rand(5, 10);
      for (i = _i = 0; 0 <= num ? _i <= num : _i >= num; i = 0 <= num ? ++_i : --_i) {
        animals = [];
        for (a = _j = 0, _ref = this.rand(2, 15); 0 <= _ref ? _j <= _ref : _j >= _ref; a = 0 <= _ref ? ++_j : --_j) {
          an = this.rnd(mean, stdev);
          if (an <= 0) {
            an = an * -1;
          }
          animals.push(an);
        }
        test = new Denigma.Experiment("Chernobyl mouse", animals);
        this.tests.push(test);
        control = new Denigma.Experiment("House mouse");
        control.set("number", this.rand(5, 10));
        control.set("min", 10);
        control.set("mean", this.rand(10, 20));
        control.set("max", this.rand(25, 30));
        this.controls.push(control);
        int = new Denigma.Intervention(this.species, this.manipulation, test, control);
        this.ints.push(int);
      }
      return this.ints;
    };

    return Fixture;

  })(Batman.Object);

}).call(this);
