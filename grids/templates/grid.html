{% extends "base.html"|pjax:request %}


{% load staticfiles %}

{% load coffeescript%}

{% load less %}


{% load selectable_tags %}


{% block coffee %}

    <!-- look down and you will understand why I am interested in concatenations =)) -->
    <script type="text/javascript" src="{{ STATIC_URL }}{% coffeescript "scripts/pjax_init.coffee" %}"> </script>

    <script type="text/javascript" src="{{ STATIC_URL }}{% coffeescript "core/django_storage.coffee" %}"> </script>

    <script type="text/javascript" src="{{ STATIC_URL }}{% coffeescript "core/denigma.coffee" %}"> </script>

    <script type="text/javascript" src="{{ STATIC_URL }}{% coffeescript "models/member.coffee" %}"> </script>

    <script type="text/javascript" src="{{ STATIC_URL }}{% coffeescript "models/organization.coffee" %}"> </script>


    <script type="text/javascript" src="{{ STATIC_URL }}{% coffeescript "controllers/member_controller.coffee" %}"> </script>

    {{ form.media }}

{% endblock coffee %}


{% block menu %}
    {% include "grid_menu.html" %}
{% endblock %}

{#<script type="text/javascript">#}
{#    function newParameters(query) {#}
{#        query.foo = 'bar';#}
{#    }#}
{##}
{#    $(document).ready(function() {#}
{#        $('#id_autocomplete').djselectable('option', 'prepareQuery', newParameters);#}
{#    });#}
{#</script>#}
<br/>

{#<section id="main" class="grid" style="height: 200px">#}
{#    <section class="thead">#}
{#        <section class="row">#}
{#            <div class="cell">id</div>#}
{#            <div class="cell">name</div>#}
{#            <div class="cell">organization</div>#}
{#        </section>#}
{#    </section>#}
{#    <section class="tbody">#}
{#        <section class="row" data-foreach-organization="Organization.all">#}
{#            <div class="cell">#}
{##}
{#                <input class="id" type="text" placeholder="name" data-bind="organization.id">#}
{#                <input class="name" type="text" placeholder="name" data-bind="organization.name">#}
{#                <input class="description" type="text" placeholder="name" data-bind="organization.description">#}
{##}
{#            </div>#}
{#        </section>#}
{##}
{#    </section>#}
{#</section>#}

{% block content_base %}



    {% block content %}
        {{ form.name }}

        <hr>
        <hr>
        <div class="pjax-container" style="height: 100%">

        <!--{"salary": 0.0, "surname": "surname_0", "name": "username_0", "age": 10, "organization": "Denigma", "id": 1}-->
        <section id="main" class="grid"  data-define-view="member#index">
            <section class="thead">
                <section class="row">
                    {% for f in fields %}
                        <div class="cell">{{f}}</div>
                    {% endfor %}
                </section>
                <section class="row">

                    {% for f in fields %}
                        <div class="cell"><input class="{{f}}" type="text" placeholder="{{f}}" data-bind="controllers.{{model}}.{{f}}"></div>
                    {%  endfor %}
                    <div class="cell">
                        <Button data-event-click="controllers.{{model}}.filter">Filter</Button>
                    </div>
                    <div class="cell" data-showif="controllers.{{model}}.filtered">
                        <Button data-event-click="controllers.{{model}}.clear">Clear</Button>
                    </div>

                </section>
            </section>
            <section class="tbody">
                <section class="row" data-foreach-{{model}}="controllers.{{model}}.items"
                         data-event-mouseover="controllers.{{model}}.over"
                         data-event-mouseout="controllers.{{model}}.out"
                        >
                    {% for f in fields %}
                        <div class="cell">
                            <input class="{{f}}" type="text"
                                   placeholder="{{f}}" data-bind="{{model}}.{{f}}"
                                   data-event-blur="controllers.{{model}}.blur"
                                    >
                        </div>
                    {% endfor %}

                    <div class="cell remove">
                        <Button data-event-click="controllers.{{model}}.remove">x</Button>
                    </div>
                    <div class="cell" data-showif="{{ model }}.isDirty">
                        <Button data-event-click="controllers.{{model}}.save">Save</Button>
                    </div>
                </section>
            </section>
            <section class="tfoot">
                <section class="row">
                    {% for f in fields %}
                        <div class="cell">
                            <input class="{{f}}" type="text" placeholder="{{f}}" data-bind="controllers.{{model}}.novice.{{ f }}">
                        </div>
                    {% endfor %}
                    <div class="cell" data-showif="controllers.{{model}}.novice.isDirty">
                        <Button data-event-click="controllers.{{model}}.add">Add</Button>
                        <Button data-event-click="controllers.{{model}}.clean">Clean</Button>
                    </div>
                </section>
            </section>

        </section>

        </div>

    {% endblock content %}

{% endblock content_base %}
